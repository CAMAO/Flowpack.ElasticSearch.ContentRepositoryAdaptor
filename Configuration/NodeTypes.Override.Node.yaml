'Neos.Neos:Node': &node
  search:
    fulltext:
      enable: true
  properties:
    'neos_node_identifier':
      search:
        elasticSearchMapping:
          type: keyword
        indexing: '${node.identifier}'

    'neos.workspace':
      search:
        elasticSearchMapping:
          type: keyword
        indexing: '${node.context.workspace.name}'

    'neos.path':
      search:
        elasticSearchMapping:
          type: keyword
        indexing: '${node.path}'

    'neos.parent_path':
      search:
        elasticSearchMapping:
          type: keyword
        # we index *all* parent paths as separate tokens to allow for efficient searching without a prefix query
        indexing: '${Indexing.buildAllPathPrefixes(node.parentPath)}'

    'neos.sort_index':
      search:
        elasticSearchMapping:
          type: integer
        indexing: '${node.index}'

    'neos.removed':
      search:
        elasticSearchMapping: '' # deliberately don't map or index this
        indexing: ''

    # we index the node type INCLUDING ALL SUPERTYPES
    'neos.type_and_supertypes':
      search:
        elasticSearchMapping:
          type: keyword
        indexing: '${Indexing.extractNodeTypeNamesAndSupertypes(node.nodeType)}'

    'neos.last_modification_date_time':
      search:
        elasticSearchMapping:
          type: date
          format: 'date_time_no_millis'
        indexing: '${(node.lastModificationDateTime ? Date.format(node.lastModificationDateTime, "Y-m-d\TH:i:sP") : null)}'

    'neos.last_publication_date_time':
      search:
        elasticSearchMapping:
          type: date
          format: 'date_time_no_millis'
        indexing: '${(node.lastPublicationDateTime ? Date.format(node.lastPublicationDateTime, "Y-m-d\TH:i:sP") : null)}'

    'neos.creation_date_time':
      search:
        elasticSearchMapping:
          type: date
          format: 'date_time_no_millis'
        indexing: '${(node.creationDateTime ? Date.format(node.creationDateTime, "Y-m-d\TH:i:sP") : null)}'

'unstructured': *node
